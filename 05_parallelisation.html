
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parallelisation &#8212; SWD6: High Performance Python</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="GPUs" href="06_GPUs.html" />
    <link rel="prev" title="Compilers" href="04_compilers.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">SWD6: High Performance Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   SWD6: High Performance Python
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="00_overview.html">
   Overview
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="01_profiling.html">
     Profiling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02_data_structures_algorithms_libraries.html">
     Data Structures, Algorithms, and Libraries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03_vectorisation.html">
     Vectorisation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_compilers.html">
     Compilers
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Parallelisation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="06_GPUs.html">
     GPUs
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07_summary.html">
   Summary
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/05_parallelisation.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/lukeconibear/swd6_hpp"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/lukeconibear/swd6_hpp/issues/new?title=Issue%20on%20page%20%2F05_parallelisation.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/lukeconibear/swd6_hpp/main?urlpath=tree/docs/05_parallelisation.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-is-it">
   What is it?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parallelising-a-python">
   Parallelising a Python?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dask">
   Dask
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#single-machine">
     Single machine
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#applications">
     Applications
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dask-array-numpy">
       dask.array (NumPy)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dask-dataframe-pandas">
       dask.dataframe (Pandas)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dask-bag">
       dask.bag
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dask-behind-the-scenes">
       Dask behind the scenes
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#distributed">
     Distributed
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dask-jobqueue">
       Dask-Jobqueue
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#configuration-files">
       Configuration files
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#examples">
       Examples
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dask-mpi">
       Dask-MPI
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#profiling-and-diagnostics">
     Profiling and diagnostics
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#visualise-the-task-graph">
       Visualise the task graph
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#local-diagnostics">
       Local diagnostics
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#distributed-diagnostics">
       Distributed diagnostics
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-dask-examples">
     More Dask examples
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ray">
   Ray
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#functions-become-tasks">
     Functions become Tasks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#classes-become-actors">
     Classes become Actors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ray-s-multiprocessing">
     Ray’s
     <code class="docutils literal notranslate">
      <span class="pre">
       multiprocessing
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ray-s-joblib">
     Ray’s
     <code class="docutils literal notranslate">
      <span class="pre">
       joblib
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dask-on-ray">
   Dask on Ray
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise">
   Exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#further-information">
   Further information
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#good-practises">
     Good practises
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-options">
     Other options
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#resources">
     Resources
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="parallelisation">
<h1>Parallelisation<a class="headerlink" href="#parallelisation" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://colab.research.google.com/github/lukeconibear/swd6_hpp/blob/main/docs/06_parallelisation.ipynb"><img alt="Open in Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">IN_COLAB</span> <span class="o">=</span> <span class="s1">&#39;google.colab&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span>
<span class="k">if</span> <span class="n">IN_COLAB</span><span class="p">:</span>
    <span class="o">%</span><span class="k">pip</span> install dask[dataframe] joblib ray
</pre></div>
</div>
</div>
</div>
<div class="section" id="what-is-it">
<h2>What is it?<a class="headerlink" href="#what-is-it" title="Permalink to this headline">¶</a></h2>
<p>Parallelisation divides a large problem into many smaller ones and solves them <em>simultaneously</em>.</p>
<ul class="simple">
<li><p><em>Divides up the time/space complexity across workers.</em></p></li>
<li><p>Tasks centrally managed by a scheduler.</p></li>
<li><p>Multi-processing (cores)</p>
<ul>
<li><p>Useful for compute-bound problems.</p></li>
<li><p>Overcomes the <a class="reference external" href="https://wiki.python.org/moin/GlobalInterpreterLock">Global Interpreter Lock, GIL</a> (prevents running the bytecode on mutliple threads simutaneously).</p></li>
<li><p>Lower performance when need to exchange/aggregate data.</p></li>
<li><p>Suitable for text data and collections.</p></li>
</ul>
</li>
<li><p>Multi-threading (parts of processes)</p>
<ul>
<li><p>Useful for memory-bound problems.</p></li>
<li><p>Suitable for numeric data (e.g., NumPy).</p></li>
</ul>
</li>
</ul>
<p>Parallelised code often introduces overheads. So, the speed-up benefits are more pronounced with bigger jobs, rather than some of the small examples used in this tutorial.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Issues can arise from pinning processes to specific cores and oversubscribing threads.
The following lines are recommended to be placed at the top of your job submission script.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ensure processes not pinned</span>
<span class="nb">unset</span> GOMP_CPU_AFFINITY

<span class="c1"># ensure linear algebra libraries using 1 thread</span>
<span class="c1"># https://docs.dask.org/en/stable/array-best-practices.html#avoid-oversubscribing-threads</span>
<span class="nb">export</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">1</span>
<span class="nb">export</span> <span class="nv">MKL_NUM_THREADS</span><span class="o">=</span><span class="m">1</span>
<span class="nb">export</span> <span class="nv">OPENBLAS_NUM_THREADS</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</div>
<div class="section" id="parallelising-a-python">
<h2>Parallelising a Python?<a class="headerlink" href="#parallelising-a-python" title="Permalink to this headline">¶</a></h2>
<p>Python itself is not designed for massive scalability and controls threads preemptively using the GIL. This has lead many libraries to work around this using C/C++ backends.</p>
<p>Some options include:</p>
<p><a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html">multiprocessing</a> for creating a pool of asynchronous workers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Pool</span>

<span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">Pool</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">workers</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">workers</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">my_function</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 4, 9]
</pre></div>
</div>
</div>
</div>
<p><a class="reference external" href="https://joblib.readthedocs.io/en/latest/">joblib</a> for creating lightweight pipelines that help with “embaressingly parallel” tasks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">joblib</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">joblib</span><span class="o">.</span><span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">)(</span>
    <span class="n">joblib</span><span class="o">.</span><span class="n">delayed</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">)(</span><span class="n">i</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0]
</pre></div>
</div>
</div>
</div>
<p><a class="reference external" href="https://docs.python.org/3/library/asyncio.html">asyncio</a> for concurrent programs, especially ones that are IO-bound.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello ...&#39;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;... World!&#39;</span><span class="p">)</span>
    
<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<p>These options work well for the CPU cores on your machine, though not really beyond that.</p>
</div>
<div class="section" id="dask">
<h2><a class="reference external" href="https://docs.dask.org/en/latest/">Dask</a><a class="headerlink" href="#dask" title="Permalink to this headline">¶</a></h2>
<p>Dask has great features, helpful documentation, and a familiar API.</p>
<p>It works through creating and computing <a class="reference external" href="https://docs.dask.org/en/stable/graphs.html">task graphs</a>.</p>
<p>Task graphs have nodes (functions) and edges (objects).</p>
<p>For example, the task graph might be:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Embarrassingly_parallel">Embarrassingly parallel</a> (apply one function to many pieces of data independently)</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/MapReduce">MapReduce</a> (map a function to the data and reduce / summarise the output)</p></li>
</ul>
<p><img alt="dask-task-graphs.svg" src="_images/dask-task-graphs.svg" /></p>
<p><em><a class="reference external" href="https://docs.dask.org/en/stable/graphs.html">Image source</a></em></p>
<p>These task graphs are executed by a <a class="reference external" href="https://docs.dask.org/en/stable/scheduling.html">scheduler</a>.</p>
<p>The resources used by this scheduler are managed by a cluster.</p>
<p><em>Note, this is separate to <a class="reference external" href="https://arcdocs.leeds.ac.uk/usage/start.html">ARC’s scheduler</a>.</em></p>
<p>There are two main types of Dask scheduler which can <a class="reference external" href="https://docs.dask.org/en/stable/deploying.html">deploy jobs</a>:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.dask.org/en/stable/deploying-python.html">Single machine</a></p>
<ul>
<li><p>Cluster manager: <a class="reference external" href="http://distributed.dask.org/en/stable/api.html#distributed.LocalCluster"><code class="docutils literal notranslate"><span class="pre">LocalCluster()</span></code></a></p></li>
<li><p>Simpler.</p></li>
<li><p>For your laptop or a local server.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://docs.dask.org/en/stable/deploying-hpc.html">Distributed</a></p>
<ul>
<li><p>Cluster manager: <a class="reference external" href="http://jobqueue.dask.org/en/latest/generated/dask_jobqueue.SGECluster.html"><code class="docutils literal notranslate"><span class="pre">SGECluster()</span></code></a>, <a class="reference external" href="http://jobqueue.dask.org/en/latest/generated/dask_jobqueue.SLURMCluster.html"><code class="docutils literal notranslate"><span class="pre">SLURMCluster()</span></code></a></p></li>
<li><p>More complex.</p></li>
<li><p>For a cluster on a high performance computer (e.g., SGE, SLURM), Kubernetes, or cloud.</p></li>
</ul>
</li>
</ul>
<p><img alt="dask-cluster-manager.svg" src="_images/dask-cluster-manager.svg" /></p>
<p><em><a class="reference external" href="https://docs.dask.org/en/stable/deploying.html">Image source</a></em></p>
<div class="section" id="single-machine">
<h3><a class="reference external" href="https://docs.dask.org/en/stable/deploying-python.html">Single machine</a><a class="headerlink" href="#single-machine" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">IN_COLAB</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">dask.distributed</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">LocalCluster</span>
    <span class="n">cluster</span> <span class="o">=</span> <span class="n">LocalCluster</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
    <span class="n">client</span> 
</pre></div>
</div>
</div>
</div>
<p>If want multiple threads, then could use keyword arguments in Client instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">processes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">threads_per_worker</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">n_workers</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Remember (important), always need to close down the client at the end:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="applications">
<h3>Applications<a class="headerlink" href="#applications" title="Permalink to this headline">¶</a></h3>
<div class="section" id="dask-array-numpy">
<h4><a class="reference external" href="https://examples.dask.org/array.html">dask.array</a> (NumPy)<a class="headerlink" href="#dask-array-numpy" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dask.array</span> <span class="k">as</span> <span class="nn">da</span>

<span class="n">my_array</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span>
    <span class="p">(</span><span class="mi">5_000</span><span class="p">,</span> <span class="mi">5_000</span><span class="p">),</span>
    <span class="n">chunks</span><span class="o">=</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span> <span class="c1"># dask chunks</span>
<span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">my_array</span> <span class="o">+</span> <span class="n">my_array</span><span class="o">.</span><span class="n">T</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">IN_COLAB</span><span class="p">:</span>
    <span class="n">result</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dask.array&lt;add, shape=(5000, 5000), dtype=float64, chunksize=(500, 500), chunktype=numpy.ndarray&gt;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="dask-dataframe-pandas">
<h4><a class="reference external" href="https://examples.dask.org/dataframe.html">dask.dataframe</a> (Pandas)<a class="headerlink" href="#dask-dataframe-pandas" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="dask-bag">
<h4><a class="reference external" href="https://examples.dask.org/bag.html">dask.bag</a><a class="headerlink" href="#dask-bag" title="Permalink to this headline">¶</a></h4>
<p>Iterate over a bag of independent objects (embarrassingly parallel).</p>
</div>
<div class="section" id="dask-behind-the-scenes">
<h4>Dask behind the scenes<a class="headerlink" href="#dask-behind-the-scenes" title="Permalink to this headline">¶</a></h4>
<p>Dask is under the hood for many libraries e.g. <a class="reference external" href="http://xarray.pydata.org/en/stable/dask.html">xarray</a>, <a class="reference external" href="https://scitools.org.uk/iris/docs/v2.4.0/userguide/real_and_lazy_data.html">iris</a>, <a class="reference external" href="https://ml.dask.org/">scikit-learn</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">tutorial</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
    <span class="s1">&#39;air_temperature&#39;</span><span class="p">,</span>
    <span class="n">chunks</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">}</span> <span class="c1"># dask chunks</span>
<span class="p">)</span>

<span class="n">ds_mean</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds_mean</span><span class="p">)</span> <span class="c1"># a dask.array (an unexecuted task graph)</span>

<span class="n">ds_mean</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>

<span class="n">ds</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;xarray.Dataset&gt;
Dimensions:  ()
Data variables:
    air      float32 dask.array&lt;chunksize=(), meta=np.ndarray&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">IN_COLAB</span><span class="p">:</span>   
    <span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="distributed">
<h3><a class="reference external" href="https://docs.dask.org/en/stable/deploying-hpc.html">Distributed</a><a class="headerlink" href="#distributed" title="Permalink to this headline">¶</a></h3>
<div class="section" id="dask-jobqueue">
<h4><a class="reference external" href="http://jobqueue.dask.org/en/latest/">Dask-Jobqueue</a><a class="headerlink" href="#dask-jobqueue" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>A variety of resource managers (e.g., <a class="reference external" href="http://jobqueue.dask.org/en/latest/examples.html#sge-deployments">SGE</a>, <a class="reference external" href="http://jobqueue.dask.org/en/latest/examples.html#slurm-deployments">SLURM</a>).</p></li>
<li><p>Batch jobs (recommended)</p></li>
<li><p>Interactive jobs</p>
<ul>
<li><p>Dask-Jobqueue is more for interactive work and the adaptive, dynamic scaling of workers.</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dask.distributed</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">dask_jobqueue</span> <span class="kn">import</span> <span class="n">SGECluster</span>

<span class="n">cluster</span> <span class="o">=</span> <span class="n">SGECluster</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="configuration-files">
<h4><a class="reference external" href="http://jobqueue.dask.org/en/latest/configuration.html">Configuration files</a><a class="headerlink" href="#configuration-files" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Add ( / update) the <a class="reference external" href="https://github.com/lukeconibear/swd6_hpp/blob/main/docs/jobqueue.yaml"><code class="docutils literal notranslate"><span class="pre">~/.config/dask/jobqueue.yaml</span></code></a> file.</p></li>
<li><p><a class="reference external" href="http://jobqueue.dask.org/en/latest/configurations.html">Examples</a></p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jobqueue</span><span class="p">:</span>

  <span class="nt">sge</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dask-worker</span>

    <span class="c1"># Dask worker options</span>
    <span class="nt">cores</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>                   <span class="c1"># Total number of cores per job</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="s">&#39;1</span><span class="nv"> </span><span class="s">GB&#39;</span>            <span class="c1"># Total amount of memory per job</span>
    <span class="nt">processes</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>                <span class="c1"># Number of Python processes per job</span>

    <span class="nt">interface</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ib0</span>                       <span class="c1"># Network interface to use like eth0 or ib0</span>
    <span class="nt">death-timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">60</span>                    <span class="c1"># Number of seconds to wait if a worker can not find a scheduler</span>
    <span class="nt">local-directory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>                <span class="c1"># Location of fast local storage like /scratch or $TMPDIR</span>

    <span class="c1"># SGE resource manager options</span>
    <span class="nt">shebang</span><span class="p">:</span> <span class="s">&quot;#!/usr/bin/env</span><span class="nv"> </span><span class="s">bash&quot;</span>
    <span class="nt">queue</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
    <span class="nt">project</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
    <span class="nt">walltime</span><span class="p">:</span> <span class="s">&#39;01:00:00&#39;</span>
    <span class="nt">extra</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
    <span class="nt">env-extra</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
    <span class="nt">job-extra</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
    <span class="nt">log-directory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>

    <span class="nt">resource-spec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="nt">distributed</span><span class="p">:</span>
  <span class="nt">worker</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span>
      <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span> <span class="c1"># dont spill to disk</span>
      <span class="nt">spill</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span> <span class="c1"># dont spill to disk</span>
      <span class="nt">pause</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.80</span> <span class="c1"># pause memory execution at 80% use</span>
      <span class="nt">terminate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.95</span> <span class="c1"># restart the worker at 95% use</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Create/edit the <a class="reference external" href="https://github.com/lukeconibear/swd6_hpp/blob/main/docs/example_dask_jobqueue_sge.py"><code class="docutils literal notranslate"><span class="pre">example_dask_jobqueue_sge.py</span></code></a> file.</p></li>
<li><p>Submit to the queue using <a class="reference external" href="https://github.com/lukeconibear/swd6_hpp/blob/main/docs/example_dask_jobqueue_sge.bash"><code class="docutils literal notranslate"><span class="pre">qsub</span> <span class="pre">example_dask_jobqueue_sge.bash</span></code></a>.</p>
<ul>
<li><p>If need to share memory across chunks:</p>
<ul>
<li><p>Use <a class="reference external" href="https://docs.dask.org/en/latest/shared.html">shared memory</a> (commonly OpenMP, Open Multi-Processing).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-pe</span> <span class="pre">smp</span> <span class="pre">np</span></code> on <a class="reference external" href="https://arcdocs.leeds.ac.uk/usage/batchjob.html#list-of-sge-options">ARC4</a></p></li>
</ul>
</li>
<li><p>Otherwise:</p>
<ul>
<li><p>Use <a class="reference external" href="https://docs.dask.org/en/latest/setup/hpc.html?highlight=mpi#using-mpi">message passing interface, MPI</a> (commonly OpenMPI).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-pe</span> <span class="pre">ib</span> <span class="pre">np</span></code> on <a class="reference external" href="https://arcdocs.leeds.ac.uk/usage/batchjob.html#list-of-sge-options">ARC4</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="dask-mpi">
<h4><a class="reference external" href="http://mpi.dask.org/en/latest/">Dask-MPI</a><a class="headerlink" href="#dask-mpi" title="Permalink to this headline">¶</a></h4>
<p>Uses the <code class="docutils literal notranslate"><span class="pre">mpi4py</span></code> package and MPI to distribute the workers (not communication).</p>
<ul class="simple">
<li><p><a class="reference external" href="http://mpi.dask.org/en/latest/batch.html">Batch jobs</a> (recommended)</p>
<ul>
<li><p>Ensure that number of cores here match that in the requested resources at the top</p></li>
</ul>
</li>
<li><p>Interactive jobs</p></li>
</ul>
</div>
</div>
<div class="section" id="profiling-and-diagnostics">
<h3><a class="reference external" href="https://docs.dask.org/en/stable/understanding-performance.html">Profiling and diagnostics</a><a class="headerlink" href="#profiling-and-diagnostics" title="Permalink to this headline">¶</a></h3>
<p>Many of the profiling tools we looked at earlier don’t work well with parallel code.</p>
<div class="section" id="visualise-the-task-graph">
<h4><a class="reference external" href="https://docs.dask.org/en/stable/graphviz.html">Visualise the task graph</a><a class="headerlink" href="#visualise-the-task-graph" title="Permalink to this headline">¶</a></h4>
<p>Before executing the computation, you could visualise the task graph.</p>
<p>This can help find potential bottlenecks.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dask.array</span> <span class="k">as</span> <span class="nn">da</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="n">chunks</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">T</span>
<span class="n">y</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;dask-transpose.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="dask-transpose.svg" src="_images/dask-transpose.svg" /></p>
<p><em><a class="reference external" href="https://docs.dask.org/en/stable/graphviz.html">Image source</a></em></p>
</div>
<div class="section" id="local-diagnostics">
<h4><a class="reference external" href="https://docs.dask.org/en/stable/diagnostics-local.html">Local diagnostics</a><a class="headerlink" href="#local-diagnostics" title="Permalink to this headline">¶</a></h4>
<p>For work on your laptop or local server.</p>
<p>Can use the</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.dask.org/en/stable/diagnostics-local.html#dask.diagnostics.Profiler"><code class="docutils literal notranslate"><span class="pre">Profiler()</span></code></a> for task execution.</p>
<ul>
<li><p>Each worker (rows on y-axis) has tasks (blocks) of different types (colours).</p></li>
<li><p>Time duration (x-axis).</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://docs.dask.org/en/stable/diagnostics-local.html#dask.diagnostics.ResourceProfiler"><code class="docutils literal notranslate"><span class="pre">ResourceProfiler()</span></code></a> for resource use.</p>
<ul>
<li><p>Percentage CPU usage (left y-axis) and memory usage (right y-axis).</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://docs.dask.org/en/stable/diagnostics-local.html#dask.diagnostics.CacheProfiler"><code class="docutils literal notranslate"><span class="pre">CacheProfiler()</span></code></a> for scheduler cache.</p>
<ul>
<li><p>Cache size (y-axis) of different types (colours).</p></li>
</ul>
</li>
</ul>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dask.array</span> <span class="k">as</span> <span class="nn">da</span>
<span class="kn">from</span> <span class="nn">dask.diagnostics</span> <span class="kn">import</span> <span class="n">Profiler</span><span class="p">,</span> <span class="n">ResourceProfiler</span><span class="p">,</span> <span class="n">CacheProfiler</span><span class="p">,</span> <span class="n">visualize</span>

<span class="c1"># Example linear algebra (QR decomposition) with Dask Array to demonstrate diagnostics.</span>
<span class="c1"># Taken from https://docs.dask.org/en/stable/diagnostics-local.html#example</span>
<span class="n">random_array</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">10_000</span><span class="p">,</span> <span class="mi">1_000</span><span class="p">),</span> <span class="n">chunks</span><span class="o">=</span><span class="p">(</span><span class="mi">1_000</span><span class="p">,</span> <span class="mi">1_000</span><span class="p">))</span>
<span class="n">q</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">qr</span><span class="p">(</span><span class="n">random_array</span><span class="p">)</span>
<span class="n">random_array_reconstructed</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

<span class="c1"># the profilers are just context managers</span>
<span class="c1"># hence, can use many in a with block</span>
<span class="k">with</span> <span class="n">Profiler</span><span class="p">()</span> <span class="k">as</span> <span class="n">prof</span><span class="p">,</span> <span class="n">ResourceProfiler</span><span class="p">(</span><span class="n">dt</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span> <span class="k">as</span> <span class="n">rprof</span><span class="p">,</span> <span class="n">CacheProfiler</span><span class="p">()</span> <span class="k">as</span> <span class="n">cprof</span><span class="p">:</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">random_array_reconstructed</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>

<span class="n">visualize</span><span class="p">([</span><span class="n">prof</span><span class="p">,</span> <span class="n">rprof</span><span class="p">,</span> <span class="n">cprof</span><span class="p">],</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns local diagnostics that can viewed in the browser:</p>
<ul class="simple">
<li><p>Each array creation runs concurrently.</p></li>
<li><p>Reduction step to combine the blocks (serial and held in cache).</p></li>
<li><p>Released from cache.</p></li>
<li><p>Parallel execution of <code class="docutils literal notranslate"><span class="pre">dot</span></code> and <code class="docutils literal notranslate"><span class="pre">sum</span></code>.</p></li>
</ul>
<div class="cell tag_remove_input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">



<!DOCTYPE html>
<html lang="en">

  <head>

      <meta charset="utf-8">
      <title>Bokeh Plot</title>







        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.1.min.js"></script>
        <script type="text/javascript">
            Bokeh.set_log_level("info");
        </script>




  </head>


  <body>






              <div class="bk-root" id="97b1483c-eb57-43b2-9f9c-1c8a116b0b04" data-root-id="1251"></div>





        <script type="application/json" id="1798">
          {"ae691afc-78a8-4fe6-ac03-f2256c5c4676":{"defs":[],"roots":{"references":[{"attributes":{"line_alpha":0.2,"line_color":"#29788E","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1146","type":"Line"},{"attributes":{},"id":"1108","type":"UnionRenderers"},{"attributes":{},"id":"1197","type":"UnionRenderers"},{"attributes":{"line_alpha":0.1,"line_color":"#22A784","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1166","type":"Line"},{"attributes":{},"id":"1109","type":"Selection"},{"attributes":{},"id":"1198","type":"Selection"},{"attributes":{"line_color":"#29788E","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1144","type":"Line"},{"attributes":{"line_color":"#440154","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1151","type":"Line"},{"attributes":{"line_alpha":0.1,"line_color":"#29788E","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1145","type":"Line"},{"attributes":{"source":{"id":"1142"}},"id":"1148","type":"CDSView"},{"attributes":{},"id":"1186","type":"BasicTickFormatter"},{"attributes":{},"id":"1199","type":"UnionRenderers"},{"attributes":{"axis_label":"% CPU","coordinates":null,"formatter":{"id":"1083"},"group":null,"major_label_policy":{"id":"1084"},"ticker":{"id":"1063"}},"id":"1062","type":"LinearAxis"},{"attributes":{},"id":"1011","type":"CategoricalScale"},{"attributes":{"axis":{"id":"1058"},"coordinates":null,"group":null,"ticker":null},"id":"1061","type":"Grid"},{"attributes":{"coordinates":null,"data_source":{"id":"1142"},"glyph":{"id":"1144"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1146"},"nonselection_glyph":{"id":"1145"},"view":{"id":"1148"}},"id":"1147","type":"GlyphRenderer"},{"attributes":{},"id":"1187","type":"AllLabels"},{"attributes":{"data":{"label":["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],"x":[0,0.6090371150057763,0.6339190260041505,0.6371179870038759,0.6372572860273067,0.7969783260195982,0.797057952004252,0.797097245027544,0.7971316980256233,0.7971642590127885,0.79719559600926,0.7974993620009627,0.7975828860071488,0.7976291740196757,0.7976689470233396,0.7977120650175493,0.7977509170013946,0.7979236400278751,0.7979640480189119,0.7979974310146645,0.7980285330268089,0.7980589190265164,0.7980906350130681,0.7983995200193021,0.7984528600063641,0.7984723990084603,0.7984907470236067,0.7985266550094821,0.7985429800173733,0.9059785840217955,0.9061748860112857,0.9148743460245896,0.9149025590158999,0.9157041840080637,0.954673731001094,0.954843448009342,0.9548634600068908,0.9643735050049145,0.9645082510251086,0.9646390770212747,0.9646972960035782,1.8333333850023337,1.833532685006503,1.8336738690268248,1.8338166360044852,1.8340433850244153,1.8340851460234262,1.8341202340088785,1.8341531100159045,1.83418609702494,1.8342192750133108,1.8342692380247172,1.8343062850181013,1.8575272420130204,1.8899914500070736,1.908430939016398,1.9269605270237662,1.9466163690085523,1.972579425026197,1.9782700550276786,2.0087790400139056,2.0090092180180363,2.0111126250121742,2.0112918090017047,2.034265217022039,2.0544075650104787,2.0717780550185125,2.082798540010117,2.096622147015296,2.109089594014222,2.1349228670005687,2.1547789120231755,2.161945880012354,2.1781196190277115,2.1926152640080545,2.1927936670253985],"y":[0,0,1,1,0,0,0,0,0,0,0,1,2,3,4,5,6,6,6,6,6,6,6,5,4,3,2,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"selected":{"id":"1194"},"selection_policy":{"id":"1193"}},"id":"1149","type":"ColumnDataSource"},{"attributes":{},"id":"1200","type":"Selection"},{"attributes":{"axis":{"id":"1062"},"coordinates":null,"dimension":1,"group":null,"ticker":null},"id":"1065","type":"Grid"},{"attributes":{},"id":"1219","type":"AllLabels"},{"attributes":{},"id":"1059","type":"BasicTicker"},{"attributes":{},"id":"1189","type":"BasicTickFormatter"},{"attributes":{"line_alpha":0.2,"line_color":"#440154","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1153","type":"Line"},{"attributes":{"below":[{"id":"1058"}],"center":[{"id":"1061"},{"id":"1065"},{"id":"1090"}],"extra_y_ranges":{"memory":{"id":"1092"}},"height":240,"left":[{"id":"1062"}],"min_border_bottom":20,"min_border_left":75,"min_border_right":75,"min_border_top":20,"renderers":[{"id":"1079"},{"id":"1097"}],"right":[{"id":"1111"}],"title":null,"toolbar":{"id":"1070"},"toolbar_location":null,"width":800,"x_range":{"id":"1005"},"x_scale":{"id":"1054"},"y_range":{"id":"1052"},"y_scale":{"id":"1056"}},"id":"1047","subtype":"Figure","type":"Plot"},{"attributes":{"dimensions":"width"},"id":"1069","type":"PanTool"},{"attributes":{"toolbar":{"id":"1249"},"toolbar_location":"above"},"id":"1250","type":"ToolbarBox"},{"attributes":{"toolbars":[{"id":"1025"},{"id":"1070"},{"id":"1136"}],"tools":[{"id":"1020"},{"id":"1021"},{"id":"1022"},{"id":"1023"},{"id":"1024"},{"id":"1066"},{"id":"1067"},{"id":"1068"},{"id":"1069"},{"id":"1131"},{"id":"1132"},{"id":"1133"},{"id":"1134"},{"id":"1135"}]},"id":"1249","type":"ProxyToolbar"},{"attributes":{},"id":"1063","type":"BasicTicker"},{"attributes":{"source":{"id":"1149"}},"id":"1155","type":"CDSView"},{"attributes":{"data":{"x":[0.0,0.26096022900310345,0.5116138019948266,0.7622975470148958,1.0134104890166782,1.2647701970126946,1.515426488011144,1.7661305160145275,2.021048255992355],"y":[0.0,716.4,766.1,765.8,740.8,763.8,750.0,761.9,757.1]},"selected":{"id":"1089"},"selection_policy":{"id":"1088"}},"id":"1075","type":"ColumnDataSource"},{"attributes":{"line_alpha":0.1,"line_color":"#440154","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1152","type":"Line"},{"attributes":{},"id":"1190","type":"AllLabels"},{"attributes":{"below":[{"id":"1013"}],"center":[{"id":"1016"},{"id":"1019"}],"height":270,"left":[{"id":"1017"}],"min_border_bottom":20,"min_border_left":75,"min_border_right":75,"renderers":[{"id":"1036"}],"title":{"id":"1003"},"toolbar":{"id":"1025"},"toolbar_location":null,"width":800,"x_range":{"id":"1005"},"x_scale":{"id":"1009"},"y_range":{"id":"1007"},"y_scale":{"id":"1011"}},"id":"1002","subtype":"Figure","type":"Plot"},{"attributes":{"dimensions":"width"},"id":"1068","type":"WheelZoomTool"},{"attributes":{"source":{"id":"1163"}},"id":"1169","type":"CDSView"},{"attributes":{},"id":"1067","type":"ResetTool"},{"attributes":{"data":{"label":["getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)"],"x":[0,0.6090371150057763,0.6339190260041505,0.6371179870038759,0.6372572860273067,0.7969783260195982,0.797057952004252,0.797097245027544,0.7971316980256233,0.7971642590127885,0.79719559600926,0.7974993620009627,0.7975828860071488,0.7976291740196757,0.7976689470233396,0.7977120650175493,0.7977509170013946,0.7979236400278751,0.7979640480189119,0.7979974310146645,0.7980285330268089,0.7980589190265164,0.7980906350130681,0.7983995200193021,0.7984528600063641,0.7984723990084603,0.7984907470236067,0.7985266550094821,0.7985429800173733,0.9059785840217955,0.9061748860112857,0.9148743460245896,0.9149025590158999,0.9157041840080637,0.954673731001094,0.954843448009342,0.9548634600068908,0.9643735050049145,0.9645082510251086,0.9646390770212747,0.9646972960035782,1.8333333850023337,1.833532685006503,1.8336738690268248,1.8338166360044852,1.8340433850244153,1.8340851460234262,1.8341202340088785,1.8341531100159045,1.83418609702494,1.8342192750133108,1.8342692380247172,1.8343062850181013,1.8575272420130204,1.8899914500070736,1.908430939016398,1.9269605270237662,1.9466163690085523,1.972579425026197,1.9782700550276786,2.0087790400139056,2.0090092180180363,2.0111126250121742,2.0112918090017047,2.034265217022039,2.0544075650104787,2.0717780550185125,2.082798540010117,2.096622147015296,2.109089594014222,2.1349228670005687,2.1547789120231755,2.161945880012354,2.1781196190277115,2.1926152640080545,2.1927936670253985],"y":[0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,3,4,5,6,7,8,9,10,11,12,13,14,14,14,15,16,16,16,17,18,18,18,19,20,10,10,11,12,13,14,15,16,17,18,19,20,18,16,14,12,10,8,6,6,7,7,7,7,7,7,7,5,5,3,1,1,1,0,0]},"selected":{"id":"1196"},"selection_policy":{"id":"1195"}},"id":"1156","type":"ColumnDataSource"},{"attributes":{},"id":"1066","type":"SaveTool"},{"attributes":{"coordinates":null,"data_source":{"id":"1149"},"glyph":{"id":"1151"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1153"},"nonselection_glyph":{"id":"1152"},"view":{"id":"1155"}},"id":"1154","type":"GlyphRenderer"},{"attributes":{"data":{"label":["subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))"],"x":[0,0.6090371150057763,0.6339190260041505,0.6371179870038759,0.6372572860273067,0.7969783260195982,0.797057952004252,0.797097245027544,0.7971316980256233,0.7971642590127885,0.79719559600926,0.7974993620009627,0.7975828860071488,0.7976291740196757,0.7976689470233396,0.7977120650175493,0.7977509170013946,0.7979236400278751,0.7979640480189119,0.7979974310146645,0.7980285330268089,0.7980589190265164,0.7980906350130681,0.7983995200193021,0.7984528600063641,0.7984723990084603,0.7984907470236067,0.7985266550094821,0.7985429800173733,0.9059785840217955,0.9061748860112857,0.9148743460245896,0.9149025590158999,0.9157041840080637,0.954673731001094,0.954843448009342,0.9548634600068908,0.9643735050049145,0.9645082510251086,0.9646390770212747,0.9646972960035782,1.8333333850023337,1.833532685006503,1.8336738690268248,1.8338166360044852,1.8340433850244153,1.8340851460234262,1.8341202340088785,1.8341531100159045,1.83418609702494,1.8342192750133108,1.8342692380247172,1.8343062850181013,1.8575272420130204,1.8899914500070736,1.908430939016398,1.9269605270237662,1.9466163690085523,1.972579425026197,1.9782700550276786,2.0087790400139056,2.0090092180180363,2.0111126250121742,2.0112918090017047,2.034265217022039,2.0544075650104787,2.0717780550185125,2.082798540010117,2.096622147015296,2.109089594014222,2.1349228670005687,2.1547789120231755,2.161945880012354,2.1781196190277115,2.1926152640080545,2.1927936670253985],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"selected":{"id":"1198"},"selection_policy":{"id":"1197"}},"id":"1163","type":"ColumnDataSource"},{"attributes":{"coordinates":null,"data_source":{"id":"1156"},"glyph":{"id":"1158"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1160"},"nonselection_glyph":{"id":"1159"},"view":{"id":"1162"}},"id":"1161","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1156"}},"id":"1162","type":"CDSView"},{"attributes":{"end":615.051264,"start":142.225408},"id":"1092","type":"Range1d"},{"attributes":{"line_color":"#22A784","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1165","type":"Line"},{"attributes":{},"id":"1201","type":"UnionRenderers"},{"attributes":{},"id":"1218","type":"BasicTickFormatter"},{"attributes":{"line_alpha":0.2,"line_color":"#22A784","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1167","type":"Line"},{"attributes":{},"id":"1191","type":"UnionRenderers"},{"attributes":{"data":{"label":["subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))"],"x":[0,0.6090371150057763,0.6339190260041505,0.6371179870038759,0.6372572860273067,0.7969783260195982,0.797057952004252,0.797097245027544,0.7971316980256233,0.7971642590127885,0.79719559600926,0.7974993620009627,0.7975828860071488,0.7976291740196757,0.7976689470233396,0.7977120650175493,0.7977509170013946,0.7979236400278751,0.7979640480189119,0.7979974310146645,0.7980285330268089,0.7980589190265164,0.7980906350130681,0.7983995200193021,0.7984528600063641,0.7984723990084603,0.7984907470236067,0.7985266550094821,0.7985429800173733,0.9059785840217955,0.9061748860112857,0.9148743460245896,0.9149025590158999,0.9157041840080637,0.954673731001094,0.954843448009342,0.9548634600068908,0.9643735050049145,0.9645082510251086,0.9646390770212747,0.9646972960035782,1.8333333850023337,1.833532685006503,1.8336738690268248,1.8338166360044852,1.8340433850244153,1.8340851460234262,1.8341202340088785,1.8341531100159045,1.83418609702494,1.8342192750133108,1.8342692380247172,1.8343062850181013,1.8575272420130204,1.8899914500070736,1.908430939016398,1.9269605270237662,1.9466163690085523,1.972579425026197,1.9782700550276786,2.0087790400139056,2.0090092180180363,2.0111126250121742,2.0112918090017047,2.034265217022039,2.0544075650104787,2.0717780550185125,2.082798540010117,2.096622147015296,2.109089594014222,2.1349228670005687,2.1547789120231755,2.161945880012354,2.1781196190277115,2.1926152640080545,2.1927936670253985],"y":[0,1,0,0,0,1,2,3,4,5,6,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"selected":{"id":"1192"},"selection_policy":{"id":"1191"}},"id":"1142","type":"ColumnDataSource"},{"attributes":{"data":{"label":["subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)"],"x":[0,0.6090371150057763,0.6339190260041505,0.6371179870038759,0.6372572860273067,0.7969783260195982,0.797057952004252,0.797097245027544,0.7971316980256233,0.7971642590127885,0.79719559600926,0.7974993620009627,0.7975828860071488,0.7976291740196757,0.7976689470233396,0.7977120650175493,0.7977509170013946,0.7979236400278751,0.7979640480189119,0.7979974310146645,0.7980285330268089,0.7980589190265164,0.7980906350130681,0.7983995200193021,0.7984528600063641,0.7984723990084603,0.7984907470236067,0.7985266550094821,0.7985429800173733,0.9059785840217955,0.9061748860112857,0.9148743460245896,0.9149025590158999,0.9157041840080637,0.954673731001094,0.954843448009342,0.9548634600068908,0.9643735050049145,0.9645082510251086,0.9646390770212747,0.9646972960035782,1.8333333850023337,1.833532685006503,1.8336738690268248,1.8338166360044852,1.8340433850244153,1.8340851460234262,1.8341202340088785,1.8341531100159045,1.83418609702494,1.8342192750133108,1.8342692380247172,1.8343062850181013,1.8575272420130204,1.8899914500070736,1.908430939016398,1.9269605270237662,1.9466163690085523,1.972579425026197,1.9782700550276786,2.0087790400139056,2.0090092180180363,2.0111126250121742,2.0112918090017047,2.034265217022039,2.0544075650104787,2.0717780550185125,2.082798540010117,2.096622147015296,2.109089594014222,2.1349228670005687,2.1547789120231755,2.161945880012354,2.1781196190277115,2.1926152640080545,2.1927936670253985],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,6,6,5,5,4,3,2,1,2,1,2,3,2,1,0,0]},"selected":{"id":"1200"},"selection_policy":{"id":"1199"}},"id":"1170","type":"ColumnDataSource"},{"attributes":{},"id":"1202","type":"Selection"},{"attributes":{"children":[{"id":"1250"},{"id":"1248"}]},"id":"1251","type":"Column"},{"attributes":{"coordinates":null,"group":null,"items":[{"id":"1091"},{"id":"1110"}]},"id":"1090","type":"Legend"},{"attributes":{"coordinates":null,"data_source":{"id":"1163"},"glyph":{"id":"1165"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1167"},"nonselection_glyph":{"id":"1166"},"view":{"id":"1169"}},"id":"1168","type":"GlyphRenderer"},{"attributes":{},"id":"1217","type":"BasicTicker"},{"attributes":{},"id":"1192","type":"Selection"},{"attributes":{},"id":"1134","type":"WheelZoomTool"},{"attributes":{"line_color":"#79D151","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1172","type":"Line"},{"attributes":{"line_alpha":0.2,"line_color":"#79D151","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1174","type":"Line"},{"attributes":{"below":[{"id":"1123"}],"center":[{"id":"1126"},{"id":"1130"}],"height":270,"left":[{"id":"1127"}],"min_border_left":75,"min_border_right":75,"min_border_top":20,"renderers":[{"id":"1147"},{"id":"1154"},{"id":"1161"},{"id":"1168"},{"id":"1175"},{"id":"1182"}],"title":null,"toolbar":{"id":"1136"},"toolbar_location":null,"width":800,"x_range":{"id":"1005"},"x_scale":{"id":"1119"},"y_range":{"id":"1117"},"y_scale":{"id":"1121"}},"id":"1112","subtype":"Figure","type":"Plot"},{"attributes":{"source":{"id":"1170"}},"id":"1176","type":"CDSView"},{"attributes":{},"id":"1117","type":"DataRange1d"},{"attributes":{"line_alpha":0.1,"line_color":"#79D151","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1173","type":"Line"},{"attributes":{},"id":"1119","type":"LinearScale"},{"attributes":{},"id":"1121","type":"LinearScale"},{"attributes":{"data":{"label":["subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)"],"x":[0,0.6090371150057763,0.6339190260041505,0.6371179870038759,0.6372572860273067,0.7969783260195982,0.797057952004252,0.797097245027544,0.7971316980256233,0.7971642590127885,0.79719559600926,0.7974993620009627,0.7975828860071488,0.7976291740196757,0.7976689470233396,0.7977120650175493,0.7977509170013946,0.7979236400278751,0.7979640480189119,0.7979974310146645,0.7980285330268089,0.7980589190265164,0.7980906350130681,0.7983995200193021,0.7984528600063641,0.7984723990084603,0.7984907470236067,0.7985266550094821,0.7985429800173733,0.9059785840217955,0.9061748860112857,0.9148743460245896,0.9149025590158999,0.9157041840080637,0.954673731001094,0.954843448009342,0.9548634600068908,0.9643735050049145,0.9645082510251086,0.9646390770212747,0.9646972960035782,1.8333333850023337,1.833532685006503,1.8336738690268248,1.8338166360044852,1.8340433850244153,1.8340851460234262,1.8341202340088785,1.8341531100159045,1.83418609702494,1.8342192750133108,1.8342692380247172,1.8343062850181013,1.8575272420130204,1.8899914500070736,1.908430939016398,1.9269605270237662,1.9466163690085523,1.972579425026197,1.9782700550276786,2.0087790400139056,2.0090092180180363,2.0111126250121742,2.0112918090017047,2.034265217022039,2.0544075650104787,2.0717780550185125,2.082798540010117,2.096622147015296,2.109089594014222,2.1349228670005687,2.1547789120231755,2.161945880012354,2.1781196190277115,2.1926152640080545,2.1927936670253985],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,3,4,5,6,6,7,7,7,8,9,10,0]},"selected":{"id":"1202"},"selection_policy":{"id":"1201"}},"id":"1177","type":"ColumnDataSource"},{"attributes":{"coordinates":null,"data_source":{"id":"1170"},"glyph":{"id":"1172"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1174"},"nonselection_glyph":{"id":"1173"},"view":{"id":"1176"}},"id":"1175","type":"GlyphRenderer"},{"attributes":{"data":{"color":["#29788E","#29788E","#29788E","#29788E","#29788E","#29788E","#29788E","#29788E","#440154","#404387","#404387","#29788E","#440154","#440154","#440154","#440154","#440154","#440154","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#29788E","#440154","#404387","#404387","#440154","#404387","#404387","#440154","#404387","#404387","#22A784","#440154","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#404387","#79D151","#79D151","#79D151","#79D151","#79D151","#79D151","#79D151","#79D151","#FDE724","#FDE724","#FDE724","#FDE724","#FDE724","#FDE724","#FDE724","#404387","#79D151","#404387","#79D151","#FDE724","#FDE724","#FDE724"],"function":["subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","_","getitem(_, *)","getitem(_, *)","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","_","_","_","_","_","_","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","subgraph_callable-00d63e0a-335f-416e-acb5-ad5b4cc6(_apply_random(...))","_","getitem(_, *)","getitem(_, *)","_","getitem(_, *)","getitem(_, *)","_","getitem(_, *)","getitem(_, *)","subgraph_callable-023c2c09-bde3-46d9-a6e1-137afa43(vstack(...))","_","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","getitem(_, *)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","getitem(_, *)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","getitem(_, *)","subgraph_callable-0265622e-7a2c-46f9-92c6-d2d05583(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)","subgraph_callable-e5f19ae3-4723-4a5a-ba4d-f12eb082(...)"],"key":["('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 0, 0)","('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 1, 0)","('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 2, 0)","('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 3, 0)","('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 4, 0)","('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 5, 0)","('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 6, 0)","('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 7, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 2, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 2, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 2, 0)","('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 8, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 5, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 0, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 6, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 1, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 3, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 7, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 5, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 0, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 6, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 1, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 3, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 7, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 7, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 3, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 1, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 6, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 0, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 5, 0)","('random_sample-qr-b69fdf83ba535252ca669f21cbdc966e', 9, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 4, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 4, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 4, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 8, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 8, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 8, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e', 9, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r1', 9, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q1', 9, 0)","('stack-qr-b69fdf83ba535252ca669f21cbdc966e-qr2', 0, 0)","('qr-b69fdf83ba535252ca669f21cbdc966e-qr2', 0, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2-aux', 0, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-r2', 0, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 0, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 1, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 2, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 3, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 4, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 5, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 6, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 7, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 0, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 1, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 2, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 3, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 4, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 5, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 6, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 7, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 0, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 1, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 2, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 3, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 4, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 5, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 6, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 8, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 8, 0)","('getitem-b69fdf83ba535252ca669f21cbdc966e-q2', 9, 0)","('dot-b69fdf83ba535252ca669f21cbdc966e-q3', 9, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 7, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 8, 0)","('tensordot-7c3726adac1026b270aa4af53c791656', 9, 0)"],"width":[0.7960337990080006,0.7960961239878088,0.607990375981899,0.7961206339823548,0.9049257139849942,0.7959242700017057,0.7960422420001123,0.7961376600142103,0.024846902990248054,0.0031435580167453736,0.00012378700193949044,0.2784330190042965,0.0005015349888708442,0.0005182799941394478,0.0005255370051600039,0.0005315500020515174,0.00054243701742962,0.0005500070110429078,0.00040078998426906765,0.0003713449987117201,0.0003594470035750419,0.00034874299308285117,0.0003391210047993809,0.0003326089936308563,0.00046917700092308223,0.0004831800179090351,0.00046972898417152464,0.0004569570010062307,0.0004625519795808941,0.0004470650164876133,0.16596157499589026,0.0001677190011832863,0.008681748004164547,0.008701966988155618,0.03895324800396338,0.00014049201854504645,0.000146997015690431,0.0001147319853771478,0.0001154799829237163,0.00016464799409732223,0.8686829840007704,0.0001488410052843392,0.00013172300532460213,0.0002586900081951171,0.000358710007276386,0.0003837380209006369,0.00041236801189370453,0.00043991600978188217,0.00046657901839353144,0.0004946069966536015,0.0005395839980337769,0.00048048500320874155,0.02347402198938653,0.055895549012348056,0.07429972902173176,0.09279517599497922,0.11242006899556145,0.13835009600734338,0.14398819199413992,0.26230392200523056,0.1535516580042895,0.14422194499638863,0.145924995013047,0.14476021399605088,0.13613562000682577,0.03615553199779242,0.13077795301796868,0.00018998602172359824,0.12589594000019133,0.0001495509932283312,0.14346732199192047,0.0652673419972416,0.04314929599058814,0.03778721101116389],"x":[0.3980168995040003,0.39805979700759053,0.30401140998583287,0.3980799720156938,0.4524869379820302,0.39798961000633426,0.39805225300369784,0.3981030809809454,0.6204674674954731,0.6345195419853553,0.6361716274986975,0.7754620565101504,0.7962219825130887,0.7962997130234726,0.796342490502866,0.7963794150273316,0.7964170335035305,0.7964521105168387,0.7966994550079107,0.7967545355204493,0.7967938755173236,0.7968303704983555,0.7968656254815869,0.7969005854974966,0.7971410325262696,0.7971875810180791,0.7972139724879526,0.7972386705223471,0.7972717760130763,0.7972959075123072,0.8803661715064663,0.905067213519942,0.9095084200089332,0.9095276675070636,0.9341701339872088,0.9537491860101,0.9537663005176,0.9634270269889385,0.9635575069987681,0.9635910489887465,1.3979642060003243,1.832434103504056,1.832584070507437,1.8326635520206764,1.8328400769969448,1.8328693509974983,1.8328902139910497,1.8329093449865468,1.8329288875102066,1.8329481154796667,1.8329757889732718,1.833042383485008,1.8447640060039703,1.86101576249348,1.8702525194967166,1.8795331789879128,1.8893785435066093,1.90237652300857,1.905248044990003,1.9644407129962929,1.9333101279917173,1.9611266655265354,1.9804156335012522,1.998369687993545,2.0137022669950966,1.9896732560009696,2.0426731905026827,2.007889177999459,2.070944147009868,2.010192294488661,2.082015494990628,2.1282844850211404,2.155518101993948,2.1726945395057555],"y":[6,4,8,3,1,7,5,2,8,8,8,8,7,7,7,7,7,7,5,5,5,5,5,5,3,3,3,3,3,3,7,5,2,2,4,5,5,2,8,8,1,3,2,2,8,8,8,8,8,8,8,8,5,1,3,7,2,6,8,4,5,1,3,7,2,8,6,8,8,5,5,1,7,4]},"selected":{"id":"1046"},"selection_policy":{"id":"1045"}},"id":"1031","type":"ColumnDataSource"},{"attributes":{"line_alpha":0.2,"line_color":"#440154","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1078","type":"Line"},{"attributes":{"axis_label":"Cache Size (count)","coordinates":null,"formatter":{"id":"1186"},"group":null,"major_label_policy":{"id":"1187"},"ticker":{"id":"1128"}},"id":"1127","type":"LinearAxis"},{"attributes":{"line_color":"#FDE724","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1179","type":"Line"},{"attributes":{"axis_label":null,"axis_line_color":null,"coordinates":null,"formatter":{"id":"1043"},"group":null,"major_label_policy":{"id":"1044"},"major_tick_line_color":null,"ticker":{"id":"1014"}},"id":"1013","type":"LinearAxis"},{"attributes":{"line_alpha":0.2,"line_color":"#FDE724","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1181","type":"Line"},{"attributes":{"axis_label":"Time (s)","coordinates":null,"formatter":{"id":"1189"},"group":null,"major_label_policy":{"id":"1190"},"ticker":{"id":"1124"}},"id":"1123","type":"LinearAxis"},{"attributes":{"axis":{"id":"1123"},"coordinates":null,"group":null,"ticker":null},"id":"1126","type":"Grid"},{"attributes":{"source":{"id":"1177"}},"id":"1183","type":"CDSView"},{"attributes":{"line_alpha":0.1,"line_color":"#FDE724","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1180","type":"Line"},{"attributes":{},"id":"1124","type":"BasicTicker"},{"attributes":{},"id":"1193","type":"UnionRenderers"},{"attributes":{"coordinates":null,"data_source":{"id":"1177"},"glyph":{"id":"1179"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1181"},"nonselection_glyph":{"id":"1180"},"view":{"id":"1183"}},"id":"1182","type":"GlyphRenderer"},{"attributes":{"axis":{"id":"1127"},"coordinates":null,"dimension":1,"group":null,"ticker":null},"id":"1130","type":"Grid"},{"attributes":{"source":{"id":"1075"}},"id":"1080","type":"CDSView"},{"attributes":{},"id":"1128","type":"BasicTicker"},{"attributes":{},"id":"1194","type":"Selection"},{"attributes":{},"id":"1014","type":"BasicTicker"},{"attributes":{"line_alpha":0.1,"line_color":"#29788E","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1095","type":"Line"},{"attributes":{},"id":"1132","type":"SaveTool"},{"attributes":{"callback":null,"tooltips":"\n    &lt;div&gt;\n        &lt;span style=\"font-size: 14px; font-weight: bold;\"&gt;Task:&lt;/span&gt;&amp;nbsp;\n        &lt;span style=\"font-size: 10px; font-family: Monaco, monospace;\"&gt;@label&lt;/span&gt;\n    &lt;/div&gt;\n    "},"id":"1131","type":"HoverTool"},{"attributes":{"data":{"x":[0.0,0.26096022900310345,0.5116138019948266,0.7622975470148958,1.0134104890166782,1.2647701970126946,1.515426488011144,1.7661305160145275,2.021048255992355],"y":[142.225408,238.497792,287.125504,333.008896,530.866176,535.175168,615.051264,615.051264,538.267648]},"selected":{"id":"1109"},"selection_policy":{"id":"1108"}},"id":"1093","type":"ColumnDataSource"},{"attributes":{},"id":"1133","type":"ResetTool"},{"attributes":{"tools":[{"id":"1131"},{"id":"1132"},{"id":"1133"},{"id":"1134"},{"id":"1135"}]},"id":"1136","type":"Toolbar"},{"attributes":{"dimensions":"width"},"id":"1135","type":"PanTool"},{"attributes":{"children":[[{"id":"1002"},0,0],[{"id":"1047"},1,0],[{"id":"1112"},2,0]]},"id":"1248","type":"GridBox"},{"attributes":{"end":2.1915881450113375},"id":"1005","type":"Range1d"},{"attributes":{},"id":"1195","type":"UnionRenderers"},{"attributes":{"axis":{"id":"1013"},"coordinates":null,"grid_line_color":null,"group":null,"ticker":null},"id":"1016","type":"Grid"},{"attributes":{"coordinates":null,"data_source":{"id":"1075"},"glyph":{"id":"1076"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1078"},"nonselection_glyph":{"id":"1077"},"view":{"id":"1080"}},"id":"1079","type":"GlyphRenderer"},{"attributes":{},"id":"1196","type":"Selection"},{"attributes":{"line_alpha":0.1,"line_color":"#440154","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1077","type":"Line"},{"attributes":{"line_alpha":0.1,"line_color":"#404387","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1159","type":"Line"},{"attributes":{"line_color":"#404387","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1158","type":"Line"},{"attributes":{"label":{"value":"% CPU"},"renderers":[{"id":"1079"}]},"id":"1091","type":"LegendItem"},{"attributes":{"line_alpha":0.2,"line_color":"#404387","line_width":3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1160","type":"Line"},{"attributes":{"line_color":"#29788E","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1094","type":"Line"},{"attributes":{"tools":[{"id":"1066"},{"id":"1067"},{"id":"1068"},{"id":"1069"}]},"id":"1070","type":"Toolbar"},{"attributes":{},"id":"1083","type":"BasicTickFormatter"},{"attributes":{},"id":"1084","type":"AllLabels"},{"attributes":{},"id":"1086","type":"BasicTickFormatter"},{"attributes":{},"id":"1087","type":"AllLabels"},{"attributes":{},"id":"1040","type":"CategoricalTickFormatter"},{"attributes":{},"id":"1041","type":"AllLabels"},{"attributes":{"dimensions":"width"},"id":"1023","type":"WheelZoomTool"},{"attributes":{},"id":"1043","type":"BasicTickFormatter"},{"attributes":{"end":766.1},"id":"1052","type":"Range1d"},{"attributes":{},"id":"1088","type":"UnionRenderers"},{"attributes":{},"id":"1044","type":"AllLabels"},{"attributes":{"axis_label":"Worker ID","axis_line_color":null,"coordinates":null,"formatter":{"id":"1040"},"group":null,"major_label_policy":{"id":"1041"},"major_tick_line_color":null,"ticker":{"id":"1018"}},"id":"1017","type":"CategoricalAxis"},{"attributes":{"axis":{"id":"1017"},"coordinates":null,"dimension":1,"grid_line_color":null,"group":null,"ticker":null},"id":"1019","type":"Grid"},{"attributes":{},"id":"1089","type":"Selection"},{"attributes":{},"id":"1018","type":"CategoricalTicker"},{"attributes":{},"id":"1021","type":"SaveTool"},{"attributes":{},"id":"1022","type":"ResetTool"},{"attributes":{"callback":null,"point_policy":"follow_mouse","tooltips":"\n    &lt;div&gt;\n        &lt;span style=\"font-size: 14px; font-weight: bold;\"&gt;Key:&lt;/span&gt;&amp;nbsp;\n        &lt;span style=\"font-size: 10px; font-family: Monaco, monospace;\"&gt;@key&lt;/span&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        &lt;span style=\"font-size: 14px; font-weight: bold;\"&gt;Task:&lt;/span&gt;&amp;nbsp;\n        &lt;span style=\"font-size: 10px; font-family: Monaco, monospace;\"&gt;@function&lt;/span&gt;\n    &lt;/div&gt;\n    "},"id":"1020","type":"HoverTool"},{"attributes":{},"id":"1045","type":"UnionRenderers"},{"attributes":{"fill_color":{"field":"color"},"hatch_color":{"field":"color"},"height":{"value":1},"line_color":{"value":"gray"},"width":{"field":"width"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1033","type":"Rect"},{"attributes":{"dimensions":"width"},"id":"1024","type":"PanTool"},{"attributes":{},"id":"1046","type":"Selection"},{"attributes":{"coordinates":null,"group":null,"text":"Profile Results"},"id":"1003","type":"Title"},{"attributes":{"factors":["0","1","2","3","4","5","6","7"]},"id":"1007","type":"FactorRange"},{"attributes":{},"id":"1009","type":"LinearScale"},{"attributes":{"source":{"id":"1031"}},"id":"1037","type":"CDSView"},{"attributes":{"line_color":"#440154","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1076","type":"Line"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"field":"color"},"hatch_alpha":{"value":0.1},"hatch_color":{"field":"color"},"height":{"value":1},"line_alpha":{"value":0.1},"line_color":{"value":"gray"},"width":{"field":"width"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1034","type":"Rect"},{"attributes":{"axis_label":null,"coordinates":null,"formatter":{"id":"1086"},"group":null,"major_label_policy":{"id":"1087"},"ticker":{"id":"1059"}},"id":"1058","type":"LinearAxis"},{"attributes":{"tools":[{"id":"1020"},{"id":"1021"},{"id":"1022"},{"id":"1023"},{"id":"1024"}]},"id":"1025","type":"Toolbar"},{"attributes":{},"id":"1054","type":"LinearScale"},{"attributes":{"coordinates":null,"data_source":{"id":"1093"},"glyph":{"id":"1094"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1096"},"nonselection_glyph":{"id":"1095"},"view":{"id":"1098"},"y_range_name":"memory"},"id":"1097","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1093"}},"id":"1098","type":"CDSView"},{"attributes":{"line_alpha":0.2,"line_color":"#29788E","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1096","type":"Line"},{"attributes":{},"id":"1056","type":"LinearScale"},{"attributes":{"axis_label":"Memory (MB)","coordinates":null,"formatter":{"id":"1218"},"group":null,"major_label_policy":{"id":"1219"},"ticker":{"id":"1217"},"y_range_name":"memory"},"id":"1111","type":"LinearAxis"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"field":"color"},"hatch_alpha":{"value":0.2},"hatch_color":{"field":"color"},"height":{"value":1},"line_alpha":{"value":0.2},"line_color":{"value":"gray"},"width":{"field":"width"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1035","type":"Rect"},{"attributes":{"label":{"value":"Memory"},"renderers":[{"id":"1097"}]},"id":"1110","type":"LegendItem"},{"attributes":{"coordinates":null,"data_source":{"id":"1031"},"glyph":{"id":"1033"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1035"},"nonselection_glyph":{"id":"1034"},"view":{"id":"1037"}},"id":"1036","type":"GlyphRenderer"}],"root_ids":["1251"]},"title":"Bokeh Application","version":"2.4.1"}}
        </script>
        <script type="text/javascript">
          (function() {
            const fn = function() {
              Bokeh.safely(function() {
                (function(root) {
                  function embed_document(root) {

                  const docs_json = document.getElementById('1798').textContent;
                  const render_items = [{"docid":"ae691afc-78a8-4fe6-ac03-f2256c5c4676","root_ids":["1251"],"roots":{"1251":"97b1483c-eb57-43b2-9f9c-1c8a116b0b04"}}];
                  root.Bokeh.embed.embed_items(docs_json, render_items);

                  }
                  if (root.Bokeh !== undefined) {
                    embed_document(root);
                  } else {
                    let attempts = 0;
                    const timer = setInterval(function(root) {
                      if (root.Bokeh !== undefined) {
                        clearInterval(timer);
                        embed_document(root);
                      } else {
                        attempts++;
                        if (attempts > 100) {
                          clearInterval(timer);
                          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                        }
                      }
                    }, 10, root)
                  }
                })(window);
              });
            };
            if (document.readyState != "loading") fn();
            else document.addEventListener("DOMContentLoaded", fn);
          })();
        </script>

  </body>

</html></div></div>
</div>
</div>
<div class="section" id="distributed-diagnostics">
<h4><a class="reference external" href="https://docs.dask.org/en/stable/diagnostics-distributed.html">Distributed diagnostics</a><a class="headerlink" href="#distributed-diagnostics" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>…</p></li>
</ul>
<p><a class="reference external" href="https://github.com/lukeconibear/swd6_hpp/blob/main/docs/images/dask-report_example_mpi_sge.html"><code class="docutils literal notranslate"><span class="pre">dask-report_example_mpi_sge.html</span></code></a><br />
<a class="reference external" href="https://github.com/lukeconibear/swd6_hpp/blob/main/docs/images/dask-report_example_jobqueue_sge.html"><code class="docutils literal notranslate"><span class="pre">dask-report_example_jobqueue_sge.html</span></code></a></p>
</div>
</div>
<div class="section" id="more-dask-examples">
<h3><a class="reference external" href="https://examples.dask.org/">More Dask examples</a><a class="headerlink" href="#more-dask-examples" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="ray">
<h2><a class="reference external" href="https://www.ray.io/">Ray</a><a class="headerlink" href="#ray" title="Permalink to this headline">¶</a></h2>
<p>Ray will automatically detect the available GPUs and CPUs on the machine.</p>
<ul class="simple">
<li><p>Can also <a class="reference external" href="https://docs.ray.io/en/latest/walkthrough.html#specifying-required-resources">specify required resources</a>.</p></li>
</ul>
<p>First, initialise Ray.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;node_ip_address&#39;: &#39;10.1.1.19&#39;,
 &#39;raylet_ip_address&#39;: &#39;10.1.1.19&#39;,
 &#39;redis_address&#39;: &#39;10.1.1.19:6379&#39;,
 &#39;object_store_address&#39;: &#39;/tmp/ray/session_2022-02-04_18-33-22_040652_3948/sockets/plasma_store&#39;,
 &#39;raylet_socket_name&#39;: &#39;/tmp/ray/session_2022-02-04_18-33-22_040652_3948/sockets/raylet&#39;,
 &#39;webui_url&#39;: None,
 &#39;session_dir&#39;: &#39;/tmp/ray/session_2022-02-04_18-33-22_040652_3948&#39;,
 &#39;metrics_export_port&#39;: 60667,
 &#39;node_id&#39;: &#39;8aa322d2be01448a4e4fd96ab19641e43a3eec18388f325df1c4d476&#39;}
</pre></div>
</div>
</div>
</div>
<div class="section" id="functions-become-tasks">
<h3>Functions become Tasks<a class="headerlink" href="#functions-become-tasks" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Parallelise functions by adding <code class="docutils literal notranslate"><span class="pre">&#64;ray.remote</span></code> decorator</p></li>
<li><p>Then instead of calling it normally, use the <code class="docutils literal notranslate"><span class="pre">.remote()</span></code> method</p></li>
<li><p>This yields a future object reference that you can retrieve with <code class="docutils literal notranslate"><span class="pre">ray.get(object)</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># asynchronously run a task</span>
<span class="n">futures</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">remote</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">futures</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 4, 9]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="classes-become-actors">
<h3>Classes become Actors<a class="headerlink" href="#classes-become-actors" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Parallelise classes the same way</p></li>
<li><p>These actors maintain their internal state</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@ray</span><span class="o">.</span><span class="n">remote</span>
<span class="k">class</span> <span class="nc">Counter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
        
    <span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Faint -Color-Faint-Yellow">(raylet)</span> [2022-02-04 18:33:23,895 E 4054 4054] agent_manager.cc:134: Not all required Ray dependencies for the runtime_env feature were found. To install the required dependencies, please run `pip install &#39;ray[default]&#39;`.
<span class=" -Color -Color-Faint -Color-Faint-Yellow">(raylet)</span> [2022-02-04 18:33:23,895 E 4054 4054] worker_pool.cc:566: [Eagerly] Couldn&#39;t create a runtime environment for job 01000000.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># construct an actor instance using .remote()</span>
<span class="n">counters</span> <span class="o">=</span> <span class="p">[</span><span class="n">Counter</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># asynchronously run actor methods</span>
<span class="p">[</span><span class="n">counter</span><span class="o">.</span><span class="n">increment</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span> <span class="k">for</span> <span class="n">counter</span> <span class="ow">in</span> <span class="n">counters</span><span class="p">]</span>
<span class="n">futures</span> <span class="o">=</span> <span class="p">[</span><span class="n">counter</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">remote</span><span class="p">()</span> <span class="k">for</span> <span class="n">counter</span> <span class="ow">in</span> <span class="n">counters</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ray</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">futures</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 1, 1, 1]
</pre></div>
</div>
</div>
</div>
<p>Other key API methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ray.put()</span></code></p>
<ul>
<li><p>Put a value in the distributed object store.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">put_id</span> <span class="pre">=</span> <span class="pre">ray.put(my_object)</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ray.get()</span></code></p>
<ul>
<li><p>Get an object from the distributed object store, either placed there by <code class="docutils literal notranslate"><span class="pre">ray.put()</span></code> explicitly or by a task or actor method, blocking until object is available.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thing</span> <span class="pre">=</span> <span class="pre">ray.get(put_id)</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ray.wait()</span></code></p>
<ul>
<li><p>Wait on a list of ids until one of the corresponding objects is available (e.g., the task completes). Return two lists, one with ids for the available objects and the other with ids for the still-running tasks or method calls.
<code class="docutils literal notranslate"><span class="pre">finished,</span> <span class="pre">running</span> <span class="pre">=</span> <span class="pre">ray.wait([train_id,</span> <span class="pre">track_id])</span></code></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="ray-s-multiprocessing">
<h3>Ray’s <a class="reference external" href="https://docs.ray.io/en/latest/multiprocessing.html"><code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code></a><a class="headerlink" href="#ray-s-multiprocessing" title="Permalink to this headline">¶</a></h3>
<p>To scale beyond one machine and generally manage a pool of processes.</p>
<p>Replace:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">multiprocessing.pool</span> <span class="kn">import</span> <span class="n">Pool</span>
</pre></div>
</div>
<p>With:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ray.util.multiprocessing.pool</span> <span class="kn">import</span> <span class="n">Pool</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ray.util.multiprocessing.pool</span> <span class="kn">import</span> <span class="n">Pool</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Pool</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">workers</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">workers</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">my_function</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 4, 9]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="ray-s-joblib">
<h3>Ray’s <a class="reference external" href="https://docs.ray.io/en/latest/joblib.html"><code class="docutils literal notranslate"><span class="pre">joblib</span></code></a><a class="headerlink" href="#ray-s-joblib" title="Permalink to this headline">¶</a></h3>
<p>The underpinnings of <a class="reference external" href="https://scikit-learn.org/stable/">scikit-learn</a>, which Ray can scale to a cluster.</p>
<p>Import and instantiate <code class="docutils literal notranslate"><span class="pre">register_ray</span></code>, which registers Ray as a <code class="docutils literal notranslate"><span class="pre">joblib</span></code> backend for <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">joblib</span>
<span class="kn">from</span> <span class="nn">ray.util.joblib</span> <span class="kn">import</span> <span class="n">register_ray</span>
<span class="n">register_ray</span><span class="p">()</span>
</pre></div>
</div>
<p>Then run your original <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> code within a Ray/<code class="docutils literal notranslate"><span class="pre">joblib</span></code> backend:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">joblib</span><span class="o">.</span><span class="n">parallel_backend</span><span class="p">(</span><span class="s1">&#39;ray&#39;</span><span class="p">):</span>
    <span class="c1"># original scikit-learn code</span>
</pre></div>
</div>
<p>For example, here’s some parallel hyperparameter tuning:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">joblib</span>
<span class="kn">from</span> <span class="nn">ray.util.joblib</span> <span class="kn">import</span> <span class="n">register_ray</span>
<span class="n">register_ray</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_digits</span>
<span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">RandomizedSearchCV</span>

<span class="n">digits</span> <span class="o">=</span> <span class="n">load_digits</span><span class="p">()</span>
<span class="n">param_space</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
    <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
    <span class="s1">&#39;tol&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
    <span class="s1">&#39;class_weight&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;balanced&#39;</span><span class="p">],</span>
<span class="p">}</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">(</span><span class="n">kernel</span><span class="o">=</span><span class="s1">&#39;rbf&#39;</span><span class="p">)</span>
<span class="n">search</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">model_selection</span><span class="o">.</span><span class="n">RandomizedSearchCV</span><span class="p">(</span>
    <span class="n">model</span><span class="p">,</span> <span class="n">param_space</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="k">with</span> <span class="n">joblib</span><span class="o">.</span><span class="n">parallel_backend</span><span class="p">(</span><span class="s1">&#39;ray&#39;</span><span class="p">):</span>
    <span class="n">search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">digits</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">digits</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
</pre></div>
</div>
<p>When finished, remember to shut down the Ray connection.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ray</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Please see this <a class="reference external" href="https://github.com/lukeconibear/distributed_deep_learning">repository</a> for examples of how to do distributed deep learning using Ray Train with TensorFlow, PyTorch, and Horovod.</p>
</div>
</div>
<div class="section" id="dask-on-ray">
<h2><a class="reference external" href="https://docs.ray.io/en/latest/data/dask-on-ray.html">Dask on Ray</a><a class="headerlink" href="#dask-on-ray" title="Permalink to this headline">¶</a></h2>
<p>Use Ray as a backend for Dask tasks.<br />
Dask dispatches tasks to Ray for scheduling and execution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ray</span>
<span class="kn">import</span> <span class="nn">dask</span>
<span class="kn">import</span> <span class="nn">dask.dataframe</span> <span class="k">as</span> <span class="nn">dd</span> 
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">ray.util.dask</span> <span class="kn">import</span> <span class="n">ray_dask_get</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dask</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">scheduler</span><span class="o">=</span><span class="n">ray_dask_get</span><span class="p">)</span> 
<span class="n">ray</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;node_ip_address&#39;: &#39;10.1.1.19&#39;,
 &#39;raylet_ip_address&#39;: &#39;10.1.1.19&#39;,
 &#39;redis_address&#39;: &#39;10.1.1.19:6379&#39;,
 &#39;object_store_address&#39;: &#39;/tmp/ray/session_2022-02-04_18-33-26_044182_3948/sockets/plasma_store&#39;,
 &#39;raylet_socket_name&#39;: &#39;/tmp/ray/session_2022-02-04_18-33-26_044182_3948/sockets/raylet&#39;,
 &#39;webui_url&#39;: None,
 &#39;session_dir&#39;: &#39;/tmp/ray/session_2022-02-04_18-33-26_044182_3948&#39;,
 &#39;metrics_export_port&#39;: 50476,
 &#39;node_id&#39;: &#39;3307fcaa3788cd8e5199007a361fb35d7c09ec33a2d076353ca6a8c2&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">8</span><span class="p">)))</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">npartitions</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>...</th>
      <th>246</th>
      <th>247</th>
      <th>248</th>
      <th>249</th>
      <th>250</th>
      <th>251</th>
      <th>252</th>
      <th>253</th>
      <th>254</th>
      <th>255</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7</td>
      <td>77</td>
      <td>14</td>
      <td>85</td>
      <td>43</td>
      <td>39</td>
      <td>66</td>
      <td>30</td>
      <td>48</td>
      <td>52</td>
      <td>...</td>
      <td>32</td>
      <td>89</td>
      <td>87</td>
      <td>51</td>
      <td>9</td>
      <td>42</td>
      <td>15</td>
      <td>88</td>
      <td>80</td>
      <td>81</td>
    </tr>
    <tr>
      <th>1</th>
      <td>23</td>
      <td>14</td>
      <td>51</td>
      <td>1</td>
      <td>86</td>
      <td>55</td>
      <td>20</td>
      <td>78</td>
      <td>73</td>
      <td>23</td>
      <td>...</td>
      <td>67</td>
      <td>55</td>
      <td>53</td>
      <td>32</td>
      <td>24</td>
      <td>38</td>
      <td>99</td>
      <td>64</td>
      <td>75</td>
      <td>99</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11</td>
      <td>61</td>
      <td>27</td>
      <td>21</td>
      <td>45</td>
      <td>75</td>
      <td>48</td>
      <td>12</td>
      <td>65</td>
      <td>25</td>
      <td>...</td>
      <td>14</td>
      <td>89</td>
      <td>37</td>
      <td>93</td>
      <td>70</td>
      <td>98</td>
      <td>85</td>
      <td>12</td>
      <td>60</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>31</td>
      <td>37</td>
      <td>51</td>
      <td>71</td>
      <td>90</td>
      <td>99</td>
      <td>93</td>
      <td>11</td>
      <td>25</td>
      <td>...</td>
      <td>86</td>
      <td>17</td>
      <td>42</td>
      <td>74</td>
      <td>64</td>
      <td>80</td>
      <td>71</td>
      <td>94</td>
      <td>34</td>
      <td>20</td>
    </tr>
    <tr>
      <th>4</th>
      <td>88</td>
      <td>39</td>
      <td>83</td>
      <td>17</td>
      <td>10</td>
      <td>32</td>
      <td>80</td>
      <td>17</td>
      <td>68</td>
      <td>93</td>
      <td>...</td>
      <td>77</td>
      <td>7</td>
      <td>77</td>
      <td>28</td>
      <td>39</td>
      <td>30</td>
      <td>41</td>
      <td>97</td>
      <td>1</td>
      <td>49</td>
    </tr>
    <tr>
      <th>5</th>
      <td>64</td>
      <td>4</td>
      <td>1</td>
      <td>64</td>
      <td>16</td>
      <td>55</td>
      <td>6</td>
      <td>91</td>
      <td>59</td>
      <td>50</td>
      <td>...</td>
      <td>84</td>
      <td>80</td>
      <td>1</td>
      <td>37</td>
      <td>22</td>
      <td>58</td>
      <td>43</td>
      <td>25</td>
      <td>13</td>
      <td>39</td>
    </tr>
    <tr>
      <th>6</th>
      <td>95</td>
      <td>56</td>
      <td>65</td>
      <td>62</td>
      <td>32</td>
      <td>25</td>
      <td>64</td>
      <td>90</td>
      <td>78</td>
      <td>55</td>
      <td>...</td>
      <td>66</td>
      <td>19</td>
      <td>66</td>
      <td>35</td>
      <td>62</td>
      <td>47</td>
      <td>28</td>
      <td>11</td>
      <td>27</td>
      <td>54</td>
    </tr>
    <tr>
      <th>7</th>
      <td>28</td>
      <td>42</td>
      <td>71</td>
      <td>78</td>
      <td>99</td>
      <td>7</td>
      <td>23</td>
      <td>41</td>
      <td>44</td>
      <td>84</td>
      <td>...</td>
      <td>94</td>
      <td>4</td>
      <td>28</td>
      <td>6</td>
      <td>96</td>
      <td>60</td>
      <td>31</td>
      <td>22</td>
      <td>1</td>
      <td>9</td>
    </tr>
    <tr>
      <th>8</th>
      <td>13</td>
      <td>15</td>
      <td>33</td>
      <td>45</td>
      <td>7</td>
      <td>53</td>
      <td>9</td>
      <td>19</td>
      <td>63</td>
      <td>61</td>
      <td>...</td>
      <td>2</td>
      <td>8</td>
      <td>43</td>
      <td>37</td>
      <td>87</td>
      <td>55</td>
      <td>68</td>
      <td>2</td>
      <td>90</td>
      <td>45</td>
    </tr>
    <tr>
      <th>9</th>
      <td>20</td>
      <td>19</td>
      <td>25</td>
      <td>35</td>
      <td>32</td>
      <td>88</td>
      <td>27</td>
      <td>33</td>
      <td>17</td>
      <td>27</td>
      <td>...</td>
      <td>25</td>
      <td>9</td>
      <td>69</td>
      <td>87</td>
      <td>78</td>
      <td>60</td>
      <td>43</td>
      <td>83</td>
      <td>43</td>
      <td>97</td>
    </tr>
  </tbody>
</table>
<p>10 rows × 256 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ray</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise">
<h2>Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline">¶</a></h2>
<p>…</p>
</div>
<div class="section" id="further-information">
<h2>Further information<a class="headerlink" href="#further-information" title="Permalink to this headline">¶</a></h2>
<div class="section" id="good-practises">
<h3>Good practises<a class="headerlink" href="#good-practises" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Start small.</p></li>
<li><p>Avoid very large chunks / partitions / task graphs (a good first option is to allow auto-chunking).</p></li>
<li><p>Only use parallelisation (e.g., Dask) when needed, then move back to normal Python ( / NumPy / Pandas).</p></li>
<li><p>Persist data in memory (RAM) where can, as faster than accessing from disk.</p></li>
<li><p>Load data with the parallel library (e.g., Dask), rather than just passing data to it to manage.</p></li>
<li><p>Call compute once, on lots of computations.</p></li>
<li><p>Avoid global state.</p></li>
<li><p>Don’t modify the data in place.</p></li>
<li><p>More information:</p>
<ul>
<li><p><a class="reference external" href="https://docs.dask.org/en/stable/best-practices.html">Dask</a>, <a class="reference external" href="https://docs.dask.org/en/stable/array-best-practices.html">Dask Array</a>, <span class="xref myst">Dask DataFrame</span>
<a class="reference external" href="https://docs.dask.org/en/stable/delayed-best-practices.html">Dask Delayed</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="other-options">
<h3>Other options<a class="headerlink" href="#other-options" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://modin.readthedocs.io/en/latest/">Modin</a></p>
<ul>
<li><p>Swap out the library import and use the same API.</p></li>
<li><p>Uses Ray or Dask to easily speed up your Pandas code.</p></li>
<li><p>To use Modin, simply replace the import and use Pandas API as normal.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://docs.pymars.org/en/latest/">Mars</a></p>
<ul>
<li><p>A tensor-based unified framework for large-scale data computation which scales numpy, pandas, scikit-learn and many other libraries.</p></li>
<li><p>Swap out the library import, use the same API, and add <code class="docutils literal notranslate"><span class="pre">.execute()</span></code>.</p></li>
<li><p><a class="reference external" href="https://docs.pymars.org/en/latest/getting_started/tensor.html">Mars Tensor</a> for NumPy.</p></li>
<li><p><a class="reference external" href="https://docs.pymars.org/en/latest/getting_started/dataframe.html">Mars DataFrame</a> for Pandas.</p></li>
<li><p>Mars can also use Ray as the backend (<a class="reference external" href="https://docs.ray.io/en/latest/data/mars-on-ray.html">instructions</a>).</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://www.pola.rs/">Polars</a></p>
<ul>
<li><p>Lightning-fast DataFrame library for Rust and Python.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://docs.ray.io/en/latest/data/raydp.html">RayDP</a></p>
<ul>
<li><p>Combines your Spark and Ray clusters, making it easy to do large scale data processing using the PySpark API and seemlessly use that data to train your models using TensorFlow and PyTorch.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="resources">
<h3>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://eliot.readthedocs.io/en/stable/scientific-computing.html">Using <code class="docutils literal notranslate"><span class="pre">eliot</span></code> with Dask</a></p></li>
<li><p><a class="reference external" href="https://ipyparallel.readthedocs.io/en/latest/">Using IPython for parallel computing</a></p></li>
<li><p><a class="reference external" href="https://youtu.be/18B1pznaU1o">Concurrency</a> can also run different tasks together, but work is not done at the same time (<a class="reference external" href="https://youtu.be/MCs5OvhV9S4">concurrency from the ground up</a>).</p></li>
<li><p><a class="reference external" href="https://youtu.be/iG6fr81xHKA">Asynchronous</a> (multi-threading), useful for massive scaling, threads controlled explicitly.</p></li>
</ul>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "swd6_hpp"
        },
        kernelOptions: {
            kernelName: "swd6_hpp",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'swd6_hpp'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="04_compilers.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Compilers</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="06_GPUs.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">GPUs</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Luke Conibear<br/>
        
            &copy; Copyright 2022.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>